{"version":3,"sources":["../../../../src/di/bindings/types/ClassBinding.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMqB,YAAY;cAAZ,YAAY;;AAI7B,aAJiB,YAAY,CAIjB,QAAY,EAAE;8BAJT,YAAY;;2EAAZ,YAAY;;AAMzB,cAAK,QAAQ,GAAG,QAAQ,CAAC;;KAC5B;;iBAPgB,YAAY;;4BASzB,QAAiB,EAAE;AACnB,gBAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;AACzB,gBAAI,SAAS,CAAC;AACd,gBAAI,oCAAoC,GAAG,KAAK,CAAC;AACjD,gBAAI,OAAO,IAAI,CAAC,MAAM,KAAK,UAAU,EAAE;AACnC,yBAAS,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;aAC7B,MAAM,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;AAC5C,yBAAS,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;aACnC,MAAM;AACH,oDAAoC,GAAG,IAAI,CAAC;AAC5C,yBAAS,GAAG,iCAAiC,CAAC,IAAI,CAAC,CAAC;aACvD;;AAED,gBAAI,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,UAAC,OAAO,EAAK;AAClC,uBAAO,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;aAChC,CAAC,CAAC;AACH,mBAAO,uBAAa,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;SAC3D;;;WA1BgB,YAAY;;;kBAAZ,YAAY;;AA6BjC,SAAS,qBAAqB,CAAC,IAAQ,EAAS;AAC5C,QAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;AAC1B,eAAO,IAAI,CAAC;KACf,MAAM;AACH,eAAO,IAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;KACtD;CACJ;;AAED,SAAS,iCAAiC,CAAC,IAAQ,EAAgB;AAC/D,WAAO,IAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CACxD,GAAG,CAAC,UAAC,QAAQ;eAAK,qBAAqB,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;KAAA,CAAC,CACzD,MAAM,CAAC,UAAC,QAAQ;eAAK,QAAQ,GAAG,IAAI,GAAG,KAAK;KAAA,CAAC,CAAC;CACtD;;AAED,SAAS,qBAAqB,CAAC,CAAQ,EAAS;AAC5C,WAAO,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;CACjD","file":"ClassBinding.js","sourcesContent":["/* @flow */\n\nimport Instantiator from '../../util/Instantiator';\nimport Binding from './Binding';\nimport Injector from \"../../Injector\"\n\nexport default class ClassBinding extends Binding {\n\n    TheClass:any;\n\n    constructor(TheClass:any) {\n        super();\n        this.TheClass = TheClass;\n    }\n\n    get(injector:Injector) {\n        var type = this.TheClass;\n        var depsTypes;\n        var isInjectingUsingConstructorArguments = false;\n        if (typeof type.inject === 'function') {\n            depsTypes = type.inject();\n        } else if (type.__diska && type.__diska.inject) {\n            depsTypes = type.__diska.inject;\n        } else {\n            isInjectingUsingConstructorArguments = true;\n            depsTypes = parseArgumentsFromTypeConstructor(type);\n        }\n\n        var deps = depsTypes.map((depType) => {\n            return injector.get(depType);\n        });\n        return Instantiator.createInstance(this.TheClass, deps);\n    }\n}\n\nfunction parseTypeNameFromType(type:any):string {\n    if (typeof type === 'string') {\n        return type;\n    } else {\n        return type.toString().split(' ')[1].split('(')[0];\n    }\n}\n\nfunction parseArgumentsFromTypeConstructor(type:any):Array<string> {\n    return type.toString().split('(')[1].split(')')[0].split(',')\n        .map((argument) => capitalizeFirstLetter(argument.trim()))\n        .filter((argument) => argument ? true : false);\n}\n\nfunction capitalizeFirstLetter(s:string):string {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n"]}